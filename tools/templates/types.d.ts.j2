// Auto-generated TypeScript definitions for {{ cls.name }}
// Generated from: {{ header_path }}

// Enums
{% for enum in cls.enums %}
{% if enum.is_enum_class %}
export namespace {{ cls.name }} {
  export enum {{ enum.name }} {
{% for value in enum.enum_values %}
    {{ value }} = "{{ value }}"{{ "," if not loop.last }}
{% endfor %}
  }
}
{% else %}
export enum {{ enum.name }} {
{% for value in enum.enum_values %}
  {{ value }} = "{{ value }}"{{ "," if not loop.last }}
{% endfor %}
}
{% endif %}
{% endfor %}

export interface {{ cls.name }} {
  handle: string;

  // Properties (Svelte Store compatible)
{% for prop in cls.properties %}
  {{ prop.name }}: {
    subscribe: (callback: (value: {{ prop.type_name | ts_type }}) => void) => { unsubscribe: () => void };
  };
{% endfor %}

  // Instance Constants (read-only, fetched once at object creation)
{% for const in cls.constants if not const.is_static %}
  readonly {{ const.name }}: {{ const.type_name | ts_type }};
{% endfor %}

  // Static Constants (also available on instances for convenience)
{% for const in cls.constants if const.is_static %}
  readonly {{ const.name }}: {{ const.type_name | ts_type }};
{% endfor %}

  // Events
{% for event in cls.events %}
  {{ event.name }}: {
    on: (callback: ({% for arg_type in event.arg_types %}{{ arg_type | ts_type }}{{ ", " if not loop.last }}{% endfor %}) => void) => void;
  };
{% endfor %}

  // Methods (all return Promises because C++ <-> JS is always async)
{% for method in cls.sync_methods %}
  {{ method.name }}: ({% for param_type, param_name in method.parameters %}{{ param_name }}: {{ param_type | ts_type }}{{ ", " if not loop.last }}{% endfor %}) => Promise<{% if method.return_type == "void" %}void{% else %}{{ method.return_type | ts_type }}{% endif %}>;
{% endfor %}
{% for method in cls.async_methods %}
  {{ method.name }}: ({% for param_type, param_name in method.parameters %}{{ param_name }}: {{ param_type | ts_type }}{{ ", " if not loop.last }}{% endfor %}) => Promise<{% if method.return_type == "void" %}void{% else %}{{ method.return_type | ts_type }}{% endif %}>;
{% endfor %}

  destroy: () => void;
}

// Factory interface - window.MyObject is the class with static create()
export interface {{ cls.name }}Static {
  create: () => Promise<{{ cls.name }}>;
{% for const in cls.constants if const.is_static %}
  readonly {{ const.name }}: {{ const.type_name | ts_type }};
{% endfor %}
}

declare global {
  interface Window {
    {{ cls.name }}: {{ cls.name }}Static;
  }
}
